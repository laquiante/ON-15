---
- hosts: leaf01
  name: push yaml file and activate
  become: yes
  gather_facts: no
  tasks:
    - name: yaml file
      copy:
        src: /home/cumulus/ON-15/inventory/files/leaf01-after-step0x
        dest: /etc/nvue.d/startup.yaml
    - name: activate config
      ansible.builtin.shell: nv config apply startup -y
      
    - name: unset
      copy:
        src: /home/cumulus/ON-15/inventory/files/leaf01-unset-step04
        dest: /home/cumulus/leaf01-unset.yaml
    - name: patch 
      ansible.builtin.shell: 'nv config patch /home/cumulus/leaf01-unset-step04.yaml'
    - name: apply config
      ansible.builtin.shell: 'nv config apply startup -y'  
      
    - name: get patch
      copy:
        src: /home/cumulus/ON-15/inventory/files/leaf01-patch-step04
        dest: /home/cumulus/leaf01-patch-step04.yaml
    - name: patch 
      ansible.builtin.shell: 'nv config patch /home/cumulus/leaf01-patch-step04.yaml'
    - name: apply config
      ansible.builtin.shell: 'nv config apply startup -y'   
      
